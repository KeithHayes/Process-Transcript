Current status:   

Output is generated, but the program algorithm has not been clearly defined until now.  Therefore the project must be examined and 
compared to the following logic and corrected as needed.

Purpose.  To identify sentences and punctuate and correct them when they are found.  Leaving other text unchanged.


Algorithm design :

Considering the previous chunk if any as possibly providing the start of a sentence, identify all complete sentences in the chunk. 
When a complete sentence is identified spelling and punctuation is corrected in that sentence.  Sentences start with a capital letter and end 
with a period or question mark.  Sentences have commas, connecting dashes will not be used.  Text that is not is in a sentence is unchanged 
however linefeeds are removed and a space is optionally added to enforce word boundries.

When a new chunk is added it overlaps the previous chunk if any, allowing the overlapped part to be rewritten because when a new chunk is 
added to the output the overlap is overwritten.

The purpose of the LLM is to identify sentences in a raw audio transcript and gramatically them.

Do not use connecting dashes. Connecting dashes can be replaced with a comma followed by a space or a period followed by two spaces and 
the capital letter of a new sentence as appropriate if grammar cannot make the transition using an appropriate connecting word.

The document is split into multiple chunks with overlap to accomplish the algorith across chunk boundaries.

Chunking is along word boundaries because of the nature of the continuous transcript.   

Transistions are smooth because chumking overlap allows corrections on the tail end of formatted output to accomidate information 
provided by the leading edge of a new chunk.  The change being accom,plished as the new chunk is appended to the output.

Example:  If a chunk is 1000 characters long the second chunnk would begin at 800 characters so the 
first 200 characters are reformatted or copied from the previous chunk.  This overlap allows a sentence to be found across a chunk boundry.

The end of the second chunk is at 1800 so the third chunk begins at 1600 to repeat the overlap re-write process allowing all complete 
sentences to be identified and properly corrected.

This should be a common technique to process a translation in chunks, and the web should be consulted as needed to ensure logic is correct.

Text outside of sentences is unchanged except that line breaks are removed.

A single blank line will divide chunks as they are added to output, but these blank lines are invisible to the algorith and formatting 
process.  



current error :

kdog@kdogsputer:~/pythonprojects/process transcript$ python run.py 
2025-06-24 20:52:02,073 - pipeline - INFO - Created 53 chunks
2025-06-24 20:52:02,073 - pipeline - INFO - Processing chunk 1/53
2025-06-24 20:52:02,073 - pipeline - INFO - LLM API call #1
2025-06-24 20:53:00,932 - pipeline - WARNING - Chunk 1 formatting issues: ["Missing ending punctuation: 'Furthermore, such aggression towards another country in the region could ignite a wider conflict involving multiple players like Russia, China, Turkey, and Syria which have their'"]
2025-06-24 20:53:00,933 - pipeline - ERROR - Processing failed: 'AlignmentProcessor' object has no attribute 'get_tail_for_context'
2025-06-24 20:53:00,933 - root - ERROR - Fatal error: 'AlignmentProcessor' object has no attribute 'get_tail_for_context'
Traceback (most recent call last):
  File "/home/kdog/pythonprojects/process transcript/run.py", line 35, in <module>
    asyncio.run(main())
  File "/usr/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/home/kdog/pythonprojects/process transcript/run.py", line 25, in main
    await pipeline.process_file(
  File "/home/kdog/pythonprojects/process transcript/pipeline.py", line 179, in process_file
    previous_tail = self.aligner.get_tail_for_context(
AttributeError: 'AlignmentProcessor' object has no attribute 'get_tail_for_context'
kdog@kdogsputer:~/pythonprojects/process transcript$ 



